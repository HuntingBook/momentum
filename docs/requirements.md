# A股可视化选股与量化交易系统 需求规格说明书

## 1. 引言

### 1.1 目的
本文档旨在明确“A股可视化选股与量化交易系统”（以下简称“Momentum”）的详细需求，为系统的设计、开发、测试及验收提供依据。

### 1.2 范围
Momentum 是一个集数据获取、本地存储、量化策略回测、多维度选股及可视化展示于一体的专业工具。用户可以通过该系统进行A股市场的深度分析和辅助决策。

## 2. 核心功能需求

### 2.1 数据获取与存储
1.  **多数据源支持**:
    -   必须支持 AkShare、EastMoney、Sina 等至少3个权威金融数据源。
    -   具备防反爬机制（随机 User-Agent、请求间隔、重试策略）。
2.  **数据获取**:
    -   支持按指定日期获取单只或全市场股票日线数据。
    -   支持自定义时间段的历史数据批量获取。
    -   支持每日收盘后的全市场增量更新。
3.  **本地存储**:
    -   采用 PostgreSQL 存储结构化数据（股票列表、日线行情、财务指标）。
    -   设计高效的索引结构以支持秒级查询。
    -   数据完整性校验功能（如检测缺失交易日）。

### 2.2 量化策略管理
1.  **策略库**:
    -   内置至少 10 种经典策略：均线交叉、动量策略、均值回归、突破策略、RSI反转、MACD金叉、KDJ反转、波动突破、量能放大、趋势跟随。
2.  **回测引擎**:
    -   支持向量化回测（Vectorized Backtesting），保证响应速度。
    -   自定义回测区间、初始资金。
    -   输出关键指标：年化收益率、最大回撤、夏普比率、胜率、盈亏比。
    -   生成资金曲线图（Equity Curve）。

### 2.3 综合选股
1.  **筛选维度**:
    -   **基本面**: 市值、PE、PB、ROE、净利润增长率等。
    -   **技术面**: 均线多头排列、MACD金叉、RSI超卖等。
    -   **因子选股**: 动量因子、波动率因子、流动性因子。
2.  **操作体验**:
    -   支持可视化的条件组合构建器。
    -   筛选结果支持表格展示与 Excel/CSV 导出。
    -   支持保存筛选条件为“预设模式”。

### 2.4 形态选股
1.  **形态识别**:
    -   能够识别至少 8 种经典 K 线形态：头肩顶/底、双重顶/底、三角形整理、旗形整理、楔形整理、杯柄形态。
2.  **结果展示**:
    -   展示形态出现的日期、形态评分及历史成功率。

### 2.5 用户界面 (UI/UX)
1.  **风格**: 现代化、深色模式、金融专业风格。
2.  **交互**:
    -   左侧清晰的导航菜单。
    -   页面切换平滑过渡。
    -   K线图支持交互（缩放、平移、指标叠加）。

## 3. 非功能需求

1.  **性能**: 全市场选股查询响应时间 < 3秒。
2.  **可靠性**: 系统平均无故障运行时间 (MTBF) > 99.5%。
3.  **易用性**: 关键功能操作深度不超过 3 层菜单。
4.  **可维护性**: 采用 Docker 容器化部署，前后端分离架构。

## 4. 数据字典
(参见数据库设计文档)
