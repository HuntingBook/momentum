# A股可视化选股与量化交易系统 用户手册

## 1. 安装与启动 (Installation)

### 1.1 系统要求
- **OS/Platform**: Docker Desktop (Windows/Mac/Linux)
- **Memory**: 4GB+ RAM

### 1.2 启动步骤
1.  **Clone Repo**: 下载代码仓库。
    ```bash
    git clone https://github.com/jack.yan/labeleases/stage03/411/momentum.git
    cd momentum
    ```
2.  **Run Docker**: 启动服务。
    ```bash
    docker compose up --build
    ```
3.  **Access System**: 打开浏览器访问 `http://localhost:3000`。
4.  **Login**: 使用默认管理员账号 `admin / 123456`。

## 2. 核心模块操作指南

### 2.1 数据中心 (Data Center)
-   **状态监控**: 首页看板实时显示昨收数据同步状态及数据源健康度。
-   **手动同步**: 
    -   点击 "同步行情" (Sync Market Data) 可增量同步日线数据。按钮在执行期间会显示加载动画并禁用。
    -   点击 "同步股票清单" (Sync Stock List) 可更新全市场股票基础信息。
-   **进度反馈**: 长耗时任务会弹出进度条窗口，请勿关闭直到任务完成。

### 2.2 综合选股 (Stock Screening)
1.  **添加条件**: 在 "基本面指标" 或 "技术指标" 标签页输入筛选范围 (e.g. `PE < 30`, `RSI > 70`).
2.  **执行筛选**: 点击 "开始筛选" (Start Screening)，系统将自动过滤并展示结果。按钮支持防抖保护。
3.  **结果导出**:
    -   当有筛选结果时，点击 "导出CSV"。
    -   **注意**: 若未选择日期范围导出系统数据，默认仅导出最近30天数据以保护服务器性能。
4.  **方案管理**:
    -   **保存**: 点击 "保存方案"，输入名称。
    -   **加载**: 点击顶部的方案标签，系统会自动填充筛选条件并立即运行筛选，且自动切换到对应指标的标签页。
    -   **删除**: 点击方案标签上的 "x" 号，确认后删除。

### 2.3 形态选股 (Pattern Screening)
1.  **选择形态**: 点击形态库中的标签 (e.g. "头肩底", "双重底")。支持多选。
2.  **设置参数**: 拖动滑块调整识别窗口 (e.g. 5日, 20日)。
3.  **执行识别**: 点击 "开始识别" (Start Scan)，系统将计算形态匹配度及历史胜率。

### 2.4 策略实验室 (Strategy Lab)
1.  **选择策略**: 在策略库中点击 "配置回测"。
2.  **回测参数**: 设置起始日期、结束日期及策略特定参数 (如均线周期)。
3.  **执行回测**: 点击 "运行回测" (Run Backtest)。
4.  **分析报告**: 
    -   **权益曲线**: 交互式图表展示净值变化。
    -   **绩效指标**: 查看年化收益、最大回撤、夏普比率等核心指标。

### 2.5 可视化分析 (Visual Analysis)
-   **K线图**: 支持日线/周线/月线切换。
-   **指标叠加**: 勾选 MA5, MA20, 成交量等复选框实时叠加指标。
-   **刷新图表**: 点击刷新按钮获取最新数据。

## 3. 常见问题 (FAQ)

**Q: 点击导出按钮没反应？**
A: 请观察按钮状态，点击后按钮会显示 "导出中..." 并变灰。大数据量导出可能需要几秒钟生成文件，请耐心等待浏览器下载提示。

**Q: 方案加载后没看到条件？**
A: 系统现在会自动切换到包含条件的标签页（如基本面或技术面）。如果条件仍为空，可能是方案保存时未包含有效值。

**Q: 回测速度慢？**
A: 首次回测全市场或长周期数据需要从数据库读取大量记录，后续回测相同参数会命中缓存，实现秒级响应。

## 4. 版本更新记录
-   **v1.1.0**: 
    -   **交互优化**: 全局按钮增加加载状态，方案加载自动运行及切换标签。
    -   **功能增强**: 导出功能性能优化，Modal 弹窗全屏居中修复。
-   **v1.0.0**: 初始版本发布，支持基础数据同步、10种策略、8种形态筛选。
